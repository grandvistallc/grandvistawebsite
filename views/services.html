<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Select Service | GrandVista Booking</title>
  <meta name="description" content="Choose your detailing service, vehicle size, pet hair, condition severity, and add-ons. Subtotal updates live." />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SWCX8FXK49"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-SWCX8FXK49');
  </script>

  <link rel="stylesheet" href="/services.css">

  <!-- Custom Clean Modern Light Mode Styling -->
  <style>
    /* Import modern font */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    
    /* Override with clean light mode styling */
    body {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
      color: #1e293b !important;
      line-height: 1.6 !important;
      margin: 0 !important;
      min-height: 100vh !important;
    }

    /* Clean page container */
    .page {
      background: transparent !important;
      max-width: 1200px !important;
      margin: 0 auto !important;
      padding: 0 1rem !important;
    }

    /* Modern header */
    .header {
      background: white !important;
      border-radius: 16px !important;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1) !important;
      padding: 2.5rem 2rem !important;
      margin: 2rem 0 !important;
      text-align: center !important;
      border: 1px solid #e2e8f0 !important;
    }

    .title {
      color: #0f172a !important;
      font-size: 2.5rem !important;
      font-weight: 800 !important;
      margin-bottom: 0.75rem !important;
      letter-spacing: -0.025em !important;
    }

    .subtitle {
      color: #64748b !important;
      font-size: 1.125rem !important;
      font-weight: 500 !important;
      max-width: 600px !important;
      margin: 0 auto !important;
    }

    /* Clean sections */
    .section {
      background: white !important;
      border: 1px solid #e2e8f0 !important;
      border-radius: 16px !important;
      padding: 2rem !important;
      margin-bottom: 1.5rem !important;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05) !important;
      transition: all 0.2s ease !important;
    }

    .section:hover {
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 10px 15px rgba(0, 0, 0, 0.1) !important;
      transform: translateY(-1px) !important;
    }

    .section-title {
      color: #0f172a !important;
      font-size: 1.75rem !important;
      font-weight: 700 !important;
      margin-bottom: 1.25rem !important;
      padding-bottom: 0.75rem !important;
      border-bottom: 2px solid #f1f5f9 !important;
    }

    .section-hint {
      color: #64748b !important;
      font-size: 0.95rem !important;
      margin-bottom: 1.5rem !important;
      font-style: italic !important;
    }

    /* Package cards */
    .grid {
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important;
      gap: 1.5rem !important;
    }

    .package-card {
      background: white !important;
      border: 2px solid #e2e8f0 !important;
      border-radius: 12px !important;
      padding: 0 !important;
      transition: all 0.3s ease !important;
      cursor: pointer !important;
      position: relative !important;
      overflow: hidden !important;
    }

    .package-card:hover {
      border-color: #f97316 !important;
      box-shadow: 0 8px 25px rgba(249, 115, 22, 0.15) !important;
      transform: translateY(-2px) !important;
    }

    /* Selected state styling */
    .package-card:has(input:checked) {
      border-color: #f97316 !important;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.2), 0 8px 25px rgba(249, 115, 22, 0.25) !important;
      background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%) !important;
      transform: translateY(-2px) !important;
    }

    /* Alternative for browsers that don't support :has() */
    .package-card.selected {
      border-color: #f97316 !important;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.2), 0 8px 25px rgba(249, 115, 22, 0.25) !important;
      background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%) !important;
      transform: translateY(-2px) !important;
    }

    .package-card.best-value {
      border-color: #f97316 !important;
      background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%) !important;
    }

    /* Override best-value styling when actually selected */
    .package-card.selected {
      border-color: #f97316 !important;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.2), 0 8px 25px rgba(249, 115, 22, 0.25) !important;
      background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%) !important;
      transform: translateY(-2px) !important;
    }

    /* Reset best-value when not selected */
    .package-card.best-value:not(.selected) {
      background: white !important;
      border-color: #e2e8f0 !important;
      box-shadow: none !important;
      transform: none !important;
    }

    /* Fall deal included styling */
    .package-card.fall-deal-included {
      border-color: #f59e0b !important;
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%) !important;
      box-shadow: 0 4px 20px rgba(245, 158, 11, 0.25) !important;
      position: relative !important;
    }

    .package-card.fall-deal-included:hover {
      border-color: #f59e0b !important;
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%) !important;
      box-shadow: 0 6px 25px rgba(245, 158, 11, 0.35) !important;
      transform: translateY(-2px) !important;
    }

    .package-card.fall-deal-included::after {
      content: "‚ú® INCLUDED FREE" !important;
      position: absolute !important;
      top: 10px !important;
      right: 10px !important;
      background: #f59e0b !important;
      color: white !important;
      font-size: 0.7rem !important;
      font-weight: 700 !important;
      padding: 4px 8px !important;
      border-radius: 12px !important;
      letter-spacing: 0.5px !important;
    }

    /* Package-specific color outlines */
    .package-card[data-pkg="gloss-shield"] {
      border-color: #10b981 !important;
      background: white !important;
    }

    .package-card[data-pkg="gloss-shield"]:hover {
      border-color: #059669 !important;
      box-shadow: 0 8px 25px rgba(16, 185, 129, 0.25) !important;
    }

    .package-card[data-pkg="gloss-shield"]:has(input:checked),
    .package-card[data-pkg="gloss-shield"].selected {
      border-color: #10b981 !important;
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2), 0 8px 25px rgba(16, 185, 129, 0.25) !important;
      background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%) !important;
    }

    .package-card[data-pkg="interior-revival"] {
      border-color: #f97316 !important;
      background: white !important;
    }

    .package-card[data-pkg="interior-revival"]:hover {
      border-color: #ea580c !important;
      box-shadow: 0 8px 25px rgba(249, 115, 22, 0.25) !important;
    }

    .package-card[data-pkg="interior-revival"]:has(input:checked),
    .package-card[data-pkg="interior-revival"].selected {
      border-color: #f97316 !important;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.2), 0 8px 25px rgba(249, 115, 22, 0.25) !important;
      background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%) !important;
    }

    .package-card[data-pkg="showroom-rebirth"] {
      border-color: #8b5cf6 !important;
      background: white !important;
    }

    .package-card[data-pkg="showroom-rebirth"]:hover {
      border-color: #7c3aed !important;
      box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25) !important;
    }

    .package-card[data-pkg="showroom-rebirth"]:has(input:checked),
    .package-card[data-pkg="showroom-rebirth"].selected {
      border-color: #8b5cf6 !important;
      box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2), 0 8px 25px rgba(139, 92, 246, 0.25) !important;
      background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%) !important;
    }

    .card-body {
      padding: 1.75rem !important;
    }

    .card-head {
      display: flex !important;
      justify-content: space-between !important;
      align-items: flex-start !important;
      margin-bottom: 1rem !important;
    }

    .card-title {
      color: #0f172a !important;
      font-size: 1.375rem !important;
      font-weight: 700 !important;
      margin: 0 !important;
      line-height: 1.3 !important;
    }

    .price {
      color: #f97316 !important;
      font-size: 2rem !important;
      font-weight: 800 !important;
      line-height: 1 !important;
    }

    .desc {
      color: #64748b !important;
      font-size: 0.95rem !important;
      margin: 0.5rem 0 !important;
    }

    .meta {
      color: #94a3b8 !important;
      font-size: 0.875rem !important;
      font-weight: 500 !important;
      margin-bottom: 1rem !important;
    }

    .best-value-badge {
      position: absolute !important;
      top: -8px !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
      background: linear-gradient(135deg, #f97316 0%, #ea580c 100%) !important;
      color: white !important;
      padding: 0.5rem 1rem !important;
      border-radius: 20px !important;
      font-size: 0.75rem !important;
      font-weight: 700 !important;
      text-transform: uppercase !important;
      letter-spacing: 0.05em !important;
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4) !important;
    }

    .promo-note {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%) !important;
      border: 1px solid #86efac !important;
      border-radius: 8px !important;
      padding: 0.875rem !important;
      margin: 1rem 0 !important;
      color: #166534 !important;
      font-size: 0.875rem !important;
      font-weight: 500 !important;
      line-height: 1.4 !important;
    }

    .details-btn {
      background: linear-gradient(135deg, #f97316 0%, #ea580c 100%) !important;
      color: white !important;
      border: none !important;
      padding: 0.75rem 1.5rem !important;
      border-radius: 8px !important;
      font-weight: 600 !important;
      font-size: 0.875rem !important;
      cursor: pointer !important;
      transition: all 0.2s ease !important;
      width: 100% !important;
    }

    .details-btn:hover {
      background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%) !important;
      transform: translateY(-1px) !important;
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3) !important;
    }

    /* Form elements styling */
    .size-list, .hair-list, .addons-list {
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)) !important;
      gap: 1rem !important;
    }

    .subgroup {
      background: #f8fafc !important;
      border: 1px solid #e2e8f0 !important;
      border-radius: 12px !important;
      padding: 1.5rem !important;
      margin-bottom: 1.5rem !important;
    }

    .subgroup-title {
      color: #0f172a !important;
      font-size: 1.25rem !important;
      font-weight: 600 !important;
      margin-bottom: 1rem !important;
      padding-bottom: 0.5rem !important;
      border-bottom: 1px solid #e2e8f0 !important;
    }

    /* Summary section */
    .summary {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%) !important;
      color: white !important;
      border: none !important;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2) !important;
    }

    .summary-row {
      display: flex !important;
      justify-content: space-between !important;
      padding: 0.75rem 0 !important;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
      color: rgba(255, 255, 255, 0.9) !important;
    }

    .summary-row.total {
      font-weight: 700 !important;
      font-size: 1.25rem !important;
      color: #fbbf24 !important;
      border-bottom: none !important;
      padding-top: 1rem !important;
    }

    .actions {
      display: flex !important;
      gap: 1rem !important;
      margin-top: 2rem !important;
    }

    .btn {
      padding: 0.875rem 2rem !important;
      border-radius: 8px !important;
      font-weight: 600 !important;
      font-size: 0.95rem !important;
      cursor: pointer !important;
      transition: all 0.2s ease !important;
      flex: 1 !important;
    }

    .btn-primary {
      background: linear-gradient(135deg, #f97316 0%, #ea580c 100%) !important;
      color: white !important;
      border: none !important;
    }

    .btn-primary:hover:not(:disabled) {
      background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%) !important;
      transform: translateY(-1px) !important;
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3) !important;
    }

    .btn-secondary {
      background: white !important;
      color: #374151 !important;
      border: 2px solid #d1d5db !important;
    }

    .btn-secondary:hover {
      background: #f9fafb !important;
      border-color: #9ca3af !important;
    }

    .btn:disabled {
      opacity: 0.5 !important;
      cursor: not-allowed !important;
    }

    /* Validation messages */
    .validation {
      color: #dc2626 !important;
      font-size: 0.875rem !important;
      font-weight: 500 !important;
      margin-top: 0.5rem !important;
    }

    /* Price note */
    .price-note {
      background: #fffbeb !important;
      border: 1px solid #fbbf24 !important;
      border-radius: 8px !important;
      padding: 1rem !important;
      color: #92400e !important;
      font-size: 0.875rem !important;
      text-align: center !important;
      margin: 1.5rem 0 !important;
    }

    /* Modal styling for package details */
    .modal {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      z-index: 1000 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      padding: 1rem !important;
    }

    .modal.hidden {
      display: none !important;
    }

    .modal-backdrop {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      background: rgba(0, 0, 0, 0.6) !important;
      backdrop-filter: blur(8px) !important;
      cursor: pointer !important;
    }

    .modal-card {
      position: relative !important;
      background: white !important;
      border-radius: 16px !important;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;
      max-width: 600px !important;
      width: 100% !important;
      max-height: 90vh !important;
      overflow-y: auto !important;
      padding: 2rem !important;
      margin: 1rem !important;
      animation: modalSlideIn 0.3s ease-out !important;
      border: 1px solid #e2e8f0 !important;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .modal-close {
      position: absolute !important;
      top: 1rem !important;
      right: 1rem !important;
      background: #f1f5f9 !important;
      border: none !important;
      border-radius: 50% !important;
      width: 40px !important;
      height: 40px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      cursor: pointer !important;
      font-size: 1.5rem !important;
      color: #64748b !important;
      transition: all 0.2s ease !important;
    }

    .modal-close:hover {
      background: #e2e8f0 !important;
      color: #374151 !important;
      transform: scale(1.1) !important;
    }

    .modal-title {
      color: #0f172a !important;
      font-size: 2rem !important;
      font-weight: 800 !important;
      margin: 0 0 1rem 0 !important;
      padding-right: 3rem !important;
      line-height: 1.2 !important;
    }

    .modal-meta {
      display: flex !important;
      align-items: center !important;
      gap: 1rem !important;
      margin-bottom: 1.5rem !important;
      padding-bottom: 1rem !important;
      border-bottom: 2px solid #f1f5f9 !important;
    }

    .modal-price {
      color: #f97316 !important;
      font-size: 2.5rem !important;
      font-weight: 900 !important;
      line-height: 1 !important;
    }

    .modal-duration {
      color: #64748b !important;
      font-size: 1.125rem !important;
      font-weight: 600 !important;
      background: #f1f5f9 !important;
      padding: 0.5rem 1rem !important;
      border-radius: 20px !important;
    }

    .modal-desc {
      color: #475569 !important;
      font-size: 1.125rem !important;
      line-height: 1.6 !important;
      margin-bottom: 2rem !important;
      font-weight: 500 !important;
    }

    .modal-list-wrap {
      margin-bottom: 2rem !important;
    }

    .modal-list-title {
      color: #0f172a !important;
      font-size: 1.375rem !important;
      font-weight: 700 !important;
      margin-bottom: 1rem !important;
      display: flex !important;
      align-items: center !important;
      gap: 0.5rem !important;
    }

    .modal-list-title:before {
      content: "‚ú®" !important;
      font-size: 1.25rem !important;
    }

    .modal-list {
      list-style: none !important;
      padding: 0 !important;
      margin: 0 !important;
      display: grid !important;
      gap: 0.75rem !important;
    }

    .modal-list li {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;
      border: 1px solid #e2e8f0 !important;
      border-radius: 8px !important;
      padding: 1rem 1.25rem !important;
      color: #374151 !important;
      font-size: 0.95rem !important;
      line-height: 1.5 !important;
      position: relative !important;
      padding-left: 2.5rem !important;
      transition: all 0.2s ease !important;
    }

    .modal-list li:hover {
      background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%) !important;
      transform: translateX(4px) !important;
    }

    .modal-list li:before {
      content: "‚úì" !important;
      position: absolute !important;
      left: 1rem !important;
      top: 50% !important;
      transform: translateY(-50%) !important;
      background: #f97316 !important;
      color: white !important;
      border-radius: 50% !important;
      width: 18px !important;
      height: 18px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      font-size: 0.75rem !important;
      font-weight: bold !important;
    }

    /* Special styling for bonus items */
    .modal-list-wrap:last-of-type .modal-list-title {
      color: #f97316 !important;
    }

    .modal-list-wrap:last-of-type .modal-list-title:before {
      content: "üéÅ" !important;
    }

    .modal-list-wrap:last-of-type .modal-list li {
      background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%) !important;
      border-color: #fed7aa !important;
    }

    .modal-list-wrap:last-of-type .modal-list li:before {
      background: #ea580c !important;
    }

    /* Mobile modal adjustments */
    @media (max-width: 768px) {
      .modal-card {
        margin: 0.5rem !important;
        padding: 1.5rem !important;
        max-height: 95vh !important;
      }

      .modal-title {
        font-size: 1.5rem !important;
        padding-right: 2.5rem !important;
      }

      .modal-price {
        font-size: 2rem !important;
      }

      .modal-meta {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 0.75rem !important;
      }

      .modal-list li {
        padding: 0.875rem 1rem !important;
        padding-left: 2.25rem !important;
        font-size: 0.9rem !important;
      }
    }

    /* Mobile responsiveness */
    @media (max-width: 768px) {
      .title {
        font-size: 2rem !important;
      }
      
      .subtitle {
        font-size: 1rem !important;
      }
      
      .header {
        padding: 1.5rem 1rem !important;
        margin: 1rem 0 !important;
      }
      
      .section {
        padding: 1.25rem !important;
        margin-bottom: 1rem !important;
      }
      
      .section-title {
        font-size: 1.5rem !important;
      }
      
      .grid {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
      }
      
      .package-card {
        margin: 0 !important;
      }
      
      .card-body {
        padding: 1.25rem !important;
      }
      
      .card-title {
        font-size: 1.125rem !important;
        line-height: 1.4 !important;
      }
      
      .price {
        font-size: 1.5rem !important;
      }
      
      .desc, .meta {
        font-size: 0.875rem !important;
      }
      
      .promo-note {
        padding: 0.75rem !important;
        font-size: 0.8rem !important;
        margin: 0.75rem 0 !important;
      }
      
      .best-value-badge {
        font-size: 0.65rem !important;
        padding: 0.375rem 0.75rem !important;
        top: -6px !important;
      }
      
      .details-btn {
        padding: 0.625rem 1rem !important;
        font-size: 0.8rem !important;
      }
      
      .size-list, .hair-list, .addons-list {
        grid-template-columns: 1fr !important;
        gap: 0.75rem !important;
      }
      
      .subgroup {
        padding: 1rem !important;
        margin-bottom: 1rem !important;
      }
      
      .subgroup-title {
        font-size: 1.125rem !important;
      }
      
      .summary {
        padding: 1.25rem !important;
      }
      
      .summary-row {
        padding: 0.5rem 0 !important;
        font-size: 0.9rem !important;
      }
      
      .summary-row.total {
        font-size: 1.125rem !important;
      }
      
      .actions {
        flex-direction: column !important;
        gap: 0.75rem !important;
        margin-top: 1.5rem !important;
      }
      
      .btn {
        padding: 0.75rem 1.5rem !important;
        font-size: 0.9rem !important;
      }
      
      .price-note {
        padding: 0.75rem !important;
        font-size: 0.8rem !important;
        margin: 1rem 0 !important;
      }
      
      .page {
        padding: 0 0.75rem !important;
      }
    }

    /* Extra small mobile screens */
    @media (max-width: 480px) {
      .title {
        font-size: 1.75rem !important;
      }
      
      .header {
        padding: 1rem 0.75rem !important;
      }
      
      .section {
        padding: 1rem !important;
      }
      
      .card-body {
        padding: 1rem !important;
      }
      
      .card-head {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 0.5rem !important;
      }
      
      .price {
        font-size: 1.375rem !important;
      }
      
      .promo-note {
        font-size: 0.75rem !important;
        padding: 0.625rem !important;
      }
      
      .page {
        padding: 0 0.5rem !important;
      }
    }
  </style>

  <!-- /NEW -->
</head>
<body>
  <div id="page" class="page">
    <header class="header">
      <h1 class="title">Step 2: Choose Your Service</h1>
      <p class="subtitle">Pick a package, confirm vehicle size & pet hair, set condition levels, add options. Subtotal updates live.</p>
    </header>

    <main id="servicesContainer" class="container">
      <!-- Packages -->
      <section id="packagesSection" class="section">
        <h2 class="section-title">Packages</h2>
        <p class="section-hint">Tip: tap a package to select it, or <em>View details</em> to see everything included.</p>
        <div id="dataError" class="validation hidden"></div>

        <div id="packagesGrid" class="grid">
          <!-- Gloss & Shield -->
          <label class="card package-card" data-pkg="gloss-shield">
            <input type="radio" name="package" value="gloss-shield" class="radio visually-hidden">
            <div class="card-body">
              <div class="card-head">
                <h3 class="card-title">Exterior Refresh</h3>
                <div class="price">$150</div>
              </div>
              <p class="desc">Premium wash + protection.</p>
              <div class="meta">‚âà1‚Äì1.5 hrs</div>
              <button type="button" class="details-btn" data-open="gloss-shield">View details</button>
            </div>
          </label>

          <!-- Interior Revival -->
          <label class="card package-card best-value" data-pkg="interior-revival">
            <input type="radio" name="package" value="interior-revival" class="radio visually-hidden">
            <div class="best-value-badge">‚òÖ Best Value ‚òÖ</div>
            <div class="card-body">
              <div class="card-head">
                <h3 class="card-title">
                  Interior Revival
                </h3>
                <div class="price">$270</div>
              </div>
              <p class="desc">Deep interior reset.</p>
              <div class="meta">‚âà2‚Äì3 hrs</div>
              <button type="button" class="details-btn" data-open="interior-revival">View details</button>
            </div>
          </label>

          <!-- Showroom Rebirth -->
          <label class="card package-card" data-pkg="showroom-rebirth">
            <input type="radio" name="package" value="showroom-rebirth" class="radio visually-hidden">
            <div class="card-body">
              <div class="card-head">
                <h3 class="card-title">Complete Rebirth</h3>
                <div class="price">$480</div>
              </div>
              <p class="desc">Complete transformation.</p>
              <div class="meta">‚âà4‚Äì5 hrs</div>
              <button type="button" class="details-btn" data-open="showroom-rebirth">View details</button>
            </div>
          </label>
        </div>
      </section>

      <!-- Vehicle Size -->
      <section id="vehicleSizeSection" class="section">
        <h2 class="section-title">Vehicle Size</h2>
        <div id="sizeList" class="size-list"></div>
        <p id="sizeRequiredMsg" class="validation hidden" style="margin-top:8px;">Please choose a vehicle size.</p>
      </section>

      <!-- Pet Hair (Required) -->
      <section id="hairSection" class="section">
        <h2 class="section-title">Pet Hair</h2>
        <div id="hairList" class="size-list"></div>
        <p id="hairRequiredMsg" class="validation hidden" style="margin-top:8px;">Please choose a pet hair level.</p>
      </section>

      <!-- Condition Severity -->
      <section id="conditionSection" class="section">
        <h2 class="section-title">Condition Severity</h2>
        <div class="subgroup">
          <div class="subgroup-title">Excessive Staining / Soiling</div>
          <div id="stainList" class="size-list"></div>
        </div>
        <div class="subgroup">
          <div class="subgroup-title">Deep Odor</div>
          <div id="odorList" class="size-list"></div>
        </div>
      </section>

      <!-- Add-ons -->
      <section id="addonsSection" class="section">
        <h2 class="section-title">Add-ons</h2>
        <div id="addonsList" class="addons-list"></div>
      </section>

      <!-- Size-based pricing note -->
      <section class="section">
        <p class="price-note">
          * Heavy Pet Hair and Paint Correction pricing adjusts based on your vehicle size (Sedan lowest, SUV higher, Truck/Van highest). Changing size updates these prices automatically.
        </p>
      </section>

      <!-- Summary -->
      <section id="summarySection" class="section summary">
        <div class="summary-row"><span>Base</span><span id="basePrice">$0</span></div>
        <div class="summary-row"><span>Size Fee</span><span id="sizeFee">$0</span></div>
        <div id="rowHair" class="summary-row hidden"><span>Pet Hair</span><span id="hairTotal">$0</span></div>
        <div id="rowStain" class="summary-row hidden"><span>Staining/Soiling</span><span id="stainTotal">$0</span></div>
        <div id="rowOdor" class="summary-row hidden"><span>Deep Odor</span><span id="odorTotal">$0</span></div>
        <div id="rowPaint" class="summary-row hidden"><span>Paint Correction</span><span id="paintTotal">$0</span></div>
        <div id="rowAddons" class="summary-row hidden"><span>Add-ons</span><span id="addonsTotal">$0</span></div>
        <hr/>
        <div class="summary-row total"><span>Subtotal</span><span id="subtotal">$0</span></div>

        <div class="actions">
          <button id="backBtn" type="button" class="btn btn-secondary">Back</button>
          <button id="continueBtn" type="button" class="btn btn-primary" disabled>Continue</button>
        </div>
        <p id="validationMsg" class="validation hidden">Please complete all required selections.</p>
      </section>
    </main>
  </div>

  <!-- Package Details Modal -->
  <div id="pkgModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="pkgModalTitle">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-card">
      <button class="modal-close" aria-label="Close" data-close="true">√ó</button>
      <h3 id="pkgModalTitle" class="modal-title">Package Details</h3>
      <div class="modal-meta">
        <span id="pkgModalPrice" class="modal-price">$0</span>
        <span id="pkgModalDuration" class="modal-duration"></span>
      </div>
      <p id="pkgModalDesc" class="modal-desc"></p>

      <div id="pkgModalIncludesWrap" class="modal-list-wrap hidden">
        <div class="modal-list-title">Includes</div>
        <ul id="pkgModalIncludes" class="modal-list"></ul>
      </div>

      <div id="pkgModalBonusesWrap" class="modal-list-wrap hidden">
        <ul id="pkgModalBonuses" class="modal-list"></ul>
      </div>
    </div>
  </div>

  <!-- ===================== -->
  <!-- Package breakdowns as templates (used by modal) -->
  <!-- ===================== -->
  <template id="tmpl-gloss-shield" data-name="Exterior Refreash" data-price="150" data-duration="‚âà1‚Äì1.5 hrs" data-desc="Premium wash + protection.">
    <div class="includes">
      <li>Premium foam bath to lift dirt safely</li>
      <li>Hand wash technique (no automated car washes)</li>
      <li>Carnauba wax application for deep, wet shine</li>
      <li>Wheels &amp; tires cleaned inside and out</li>
      <li>Hand-dried with microfiber ‚Äî zero water spots</li>
      <li>Tire protection applied for that showroom look</li>
    </div>
    <div class="bonuses">
      <li><strong>FREE Bonus ($15 value)</strong></li>
      <li>Quick interior vacuum (seats, floor, mats)</li>
      <li>Dashboard wipe-down</li>
      <li>Exterior care guide (digital)</li>
    </div>
  </template>

  <!-- CHANGED: Interior bonuses now reflect Fall Deal precisely -->
  <template id="tmpl-interior-revival" data-name="Interior Revival" data-price="270" data-duration="‚âà2‚Äì3 hrs" data-desc="Deep interior reset.">
    <div class="includes">
      <li>Complete vacuum system ‚Äî seats, carpets, trunk, crevices</li>
      <li>Carpet shampoo + extraction to remove embedded dirt</li>
      <li>Steam cleaning for stubborn stains &amp; sanitization</li>
      <li>All surfaces degreased and sanitized</li>
      <li>UV protectant on plastics and vinyl</li>
      <li>Leather cleaning + conditioning</li>
      <li>Interior windows &amp; mirrors crystal clear</li>
      <li>Door jambs cleaned + protected</li>
    </div>
    <div class="bonuses">
      <li><strong>Fall Deal Bonus ($150 value)</strong></li>
      <li>üéÅ <strong>FREE Exterior Refresh</strong> ‚Äî auto-applied when you book Interior Revival</li>
      <li><em>Limited time:</em> <strong>Ends Nov 30</strong></li>
      <li>No code needed</li>
    </div>
  </template>
  <!-- /CHANGED -->

  <template id="tmpl-showroom-rebirth" data-name="Complete Rebirth" data-price="480" data-duration="‚âà4‚Äì5 hrs" data-desc="Complete transformation.">
    <div class="includes">
      <li><strong>Complete Interior Transformation</strong></li>
      <li>Everything from Interior Revival Package</li>
      <li>Premium scent selection (5 luxury options)</li>
      <li>Fabric protection treatment (stain resistance)</li>
      <li><strong>Full Exterior Restoration</strong></li>
      <li>Premium foam bath + hand wash</li>
      <li>Wheels, tires, and undercarriage deep clean</li>
      <li>Clay bar treatment (removes embedded contaminants)</li>
      <li>Bug and tar removal</li>
      <li>Single-step machine polish (removes swirl marks)</li>
      <li>Ceramic wax application (12+ months protection)</li>
      <li>Window and wheel ceramic coating</li>
      <li>Tire shine application (that glossy, wet look)</li>
    </div>
    <div class="bonuses">
      <li><strong>VIP Bonus Package ($150 value)</strong></li>
      <li>Engine Bay Detail (clean and protected)</li>
      <li>Complete Car Care Guide (interior + exterior)</li>
      <li>6-Month Stain Guard Protection</li>
      <li>$50 Loyalty Credit toward next service</li>
      <li>Priority Booking Status for future appointments</li>
    </div>
  </template>

  <!-- Add modal functionality script with real package data -->
  <script>
    // Package data from packages.html
    const packageData = {
      'gloss-shield': {
        name: 'Exterior Refresh',
        price: '150',
        duration: '‚âà1‚Äì1.5 hrs',
        desc: 'Premium wash + protection.',
        perfectFor: 'Quick refreshes, date nights, or weekly maintenance',
        quote: '"Get that weekend-fresh feeling without the weekend time commitment."',
        includes: [
          'Hand-washed with gentle, premium soap‚Äîno machines, ever.',
          'Expert care removes dirt and road grime safely.',
          'Glossy carnauba wax for a deep, mirror-like shine.',
          'Wheels and tires cleaned to perfection.',
          'Soft microfiber towels for a spotless, swirl-free finish.',
          'Tire dressing for that fresh-from-the-showroom look.'
        ],
        bonuses: []
      },
      'interior-revival': {
        name: 'Interior Renew',
        price: '270',
        duration: '‚âà2‚Äì3 hrs',
        desc: 'Deep interior reset.',
        perfectFor: 'Deep cleaning, pet owners, families, or anyone who spends serious time in their car',
        quote: '"Walk into a car that feels brand new again. This is where the magic happens."',
        includes: [
          'Full vacuum of seats, carpets, and trunk‚Äîno crumb left behind.',
          'Carpets shampooed and deep-cleaned for a fresh feel.',
          'Steam cleaning lifts tough stains and germs.',
          'All surfaces wiped, sanitized, and left spotless.',
          'UV protectant keeps your dash and doors looking new.',
          'Leather seats cleaned and conditioned for softness.',
          'Windows and mirrors polished crystal clear.',
          'Door edges detailed for a complete finish.'
        ],
        bonuses: []
      },
      'showroom-rebirth': {
        name: 'Complete Rebirth',
        price: '480',
        duration: '‚âà4‚Äì5 hrs',
        desc: 'Complete transformation.',
        perfectFor: 'Special occasions, car enthusiasts, selling your vehicle, or the ultimate "treat yourself" experience',
        quote: '"This isn\'t just detailing‚Äîit\'s a complete rebirth. Your car will look better than the day you bought it."',
        includes: [
          '<strong>üè† Complete Interior Transformation:</strong>',
          'Includes everything in the Interior Revival Package.',
          'Choose a luxury scent to make your car smell amazing.',
          'Premium fabric protection keeps seats looking great.',
          '',
          '<strong>‚ú® Full Exterior Restoration:</strong>',
          'Hand wash with rich, gentle soap for a flawless finish.',
          'Wheels, tires, and undercarriage cleaned with expert care.',
          'Clay bar treatment removes stuck-on dirt for smooth paint.',
          'Bugs and sticky spots gently removed.',
          'Machine polish brings out a brilliant, glossy shine.',
          'Ceramic wax for long-lasting, luxury protection.',
          'Windows and wheels detailed to perfection.',
          'Tires finished with a high-gloss, premium shine.',
          '',
          '<strong>Additional Premium Services:</strong>',
          'Engine bay cleaned and protected',
          'Complete car care guide (interior + exterior)',
          '6-month stain guard protection',
          'Priority booking status for future appointments'
        ],
        bonuses: [
          'üöÄ <strong>BONUS:</strong>',
          '$50 Loyalty Credit toward next service'
        ]
      }
    };

    // Modal functionality for package details
    document.addEventListener('DOMContentLoaded', function() {
      const modal = document.getElementById('pkgModal');
      const modalTitle = document.getElementById('pkgModalTitle');
      const modalPrice = document.getElementById('pkgModalPrice');
      const modalDuration = document.getElementById('pkgModalDuration');
      const modalDesc = document.getElementById('pkgModalDesc');
      const modalIncludesWrap = document.getElementById('pkgModalIncludesWrap');
      const modalIncludes = document.getElementById('pkgModalIncludes');
      const modalBonusesWrap = document.getElementById('pkgModalBonusesWrap');
      const modalBonuses = document.getElementById('pkgModalBonuses');

      // Package selection visual feedback
      const packageRadios = document.querySelectorAll('input[name="package"]');
      const packageCards = document.querySelectorAll('.package-card');

      function updatePackageSelection() {
        console.log('updatePackageSelection called');
        
        // Don't remove selected classes - let handlePackageSelection manage them
        // This prevents conflicts with fall deal logic
        
        packageRadios.forEach(radio => {
          if (radio.checked) {
            console.log('Radio checked:', radio.value);
            const card = radio.closest('.package-card');
            if (card && !card.classList.contains('selected')) {
              card.classList.add('selected');
              console.log('Added selected class to:', radio.value);
            }
          }
        });
      }

      // Handle package selection with special Interior Revival logic
      function handlePackageSelection(selectedValue) {
        console.log('handlePackageSelection called with:', selectedValue);
        
        const interiorRevivalRadio = document.querySelector('input[value="interior-revival"]');
        const exteriorRefreshRadio = document.querySelector('input[value="gloss-shield"]');
        const exteriorRefreshCard = document.querySelector('[data-pkg="gloss-shield"]');
        const interiorRevivalCard = document.querySelector('[data-pkg="interior-revival"]');
        const exteriorPrice = document.querySelector('[data-pkg="gloss-shield"] .price');
        
        console.log('Found elements:', {
          interiorRevivalRadio: !!interiorRevivalRadio,
          exteriorRefreshRadio: !!exteriorRefreshRadio,
          exteriorPrice: !!exteriorPrice,
          exteriorRefreshCard: !!exteriorRefreshCard,
          interiorRevivalCard: !!interiorRevivalCard
        });
        
        // Clear all visual selections first
        packageCards.forEach(card => {
          card.classList.remove('selected');
          card.classList.remove('fall-deal-included');
        });
        
        if (selectedValue === 'interior-revival') {
          console.log('Interior Revival selected - activating fall deal');
          
          // Select Interior Revival radio (this is the main selection)
          if (interiorRevivalRadio) {
            interiorRevivalRadio.checked = true;
            console.log('Interior Revival radio checked');
          }
          
          // Add visual selection to Interior Revival
          if (interiorRevivalCard) {
            interiorRevivalCard.classList.add('selected');
          }
          
          // Add visual selection to Exterior Refresh (fall deal)
          if (exteriorRefreshCard) {
            exteriorRefreshCard.classList.add('selected', 'fall-deal-included');
            console.log('Exterior Refresh card marked as selected with fall deal');
          }
          
          // Update Exterior Refresh price to show fall deal pricing
          if (exteriorPrice) {
            exteriorPrice.innerHTML = '<span style="text-decoration: line-through; color: #94a3b8; background: none; padding: 0; border-radius: 0;">$150</span> <span style="color: #10b981; font-weight: 800; background: none; padding: 0; border-radius: 0;">FREE</span>';
            console.log('Exterior price updated to show fall deal');
          }
        } else {
          console.log('Other package selected:', selectedValue);
          
          // For other packages, select normally
          const selectedRadio = document.querySelector(`input[value="${selectedValue}"]`);
          if (selectedRadio) {
            selectedRadio.checked = true;
            console.log('Selected radio checked:', selectedValue);
            
            // Add visual selection to the selected card
            const selectedCard = selectedRadio.closest('.package-card');
            if (selectedCard) {
              selectedCard.classList.add('selected');
            }
          }
          
          // Reset Exterior Refresh price to normal
          if (exteriorPrice) {
            exteriorPrice.textContent = '$150';
            console.log('Exterior price reset to $150');
          }
        }
        
        console.log('Package selection update complete');
      }

      // Log found elements for debugging
      console.log('Package selection setup - Found radios:', packageRadios.length);
      console.log('Package selection setup - Found cards:', packageCards.length);
      
      // Log radio values
      packageRadios.forEach((radio, index) => {
        console.log(`Radio ${index}:`, radio.value, radio.name);
      });

      // Listen for package selection changes
      packageRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          console.log('Radio change event:', this.value, this.checked);
          if (this.checked) {
            handlePackageSelection(this.value);
          }
        });
      });

      // Add click handlers for package cards
      packageCards.forEach(card => {
        card.addEventListener('click', function(e) {
          // Skip if clicking on the details button
          if (e.target.classList.contains('details-btn')) {
            return;
          }
          
          const radio = this.querySelector('input[type="radio"]');
          if (radio) {
            handlePackageSelection(radio.value);
          }
        });
      });

      // Initial check for pre-selected packages
      updatePackageSelection();
      
      // Check if Interior Revival is initially selected and apply fall deal
      const initialInteriorRevival = document.querySelector('input[value="interior-revival"]:checked');
      if (initialInteriorRevival) {
        handlePackageSelection('interior-revival');
      }

      // Add click handlers to all "View details" buttons
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('details-btn')) {
          e.preventDefault();
          const packageId = e.target.getAttribute('data-open');
          showPackageModal(packageId);
        }

        // Close modal on backdrop click or close button
        if (e.target.getAttribute('data-close') === 'true' || e.target.classList.contains('modal-close')) {
          closeModal();
        }
      });

      // Close modal on Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
          closeModal();
        }
      });

      function showPackageModal(packageId) {
        const pkg = packageData[packageId];
        if (!pkg) return;

        // Set modal content with real package data
        modalTitle.textContent = pkg.name;
        modalPrice.textContent = '$' + pkg.price;
        modalDuration.textContent = pkg.duration;
        
        // Create rich description with perfect for and quote
        modalDesc.innerHTML = `
          <div style="margin-bottom: 1.5rem;">
            <strong style="color: #f97316;">Perfect for:</strong> ${pkg.perfectFor}
          </div>
          <div style="font-style: italic; color: #64748b; font-size: 1rem; padding: 1rem; background: #f8fafc; border-left: 4px solid #f97316; border-radius: 8px;">
            ${pkg.quote}
          </div>
        `;

        // Clear existing content
        modalIncludes.innerHTML = '';
        modalBonuses.innerHTML = '';

        // Add includes from packages.html data
        if (pkg.includes && pkg.includes.length > 0) {
          pkg.includes.forEach(item => {
            const li = document.createElement('li');
            li.innerHTML = item;
            modalIncludes.appendChild(li);
          });
          modalIncludesWrap.classList.remove('hidden');
        } else {
          modalIncludesWrap.classList.add('hidden');
        }

        // Add bonuses from packages.html data
        if (pkg.bonuses && pkg.bonuses.length > 0) {
          pkg.bonuses.forEach(item => {
            const li = document.createElement('li');
            li.innerHTML = item;
            modalBonuses.appendChild(li);
          });
          modalBonusesWrap.classList.remove('hidden');
        } else {
          modalBonusesWrap.classList.add('hidden');
        }

        // Show modal
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
      }

      function closeModal() {
        modal.classList.add('hidden');
        document.body.style.overflow = ''; // Restore scrolling
      }

      // Pre-select package based on URL parameter
      function preselectPackageFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        const packageParam = urlParams.get('package');
        
        if (packageParam) {
          const packageInput = document.querySelector(`input[value="${packageParam}"]`);
          if (packageInput) {
            packageInput.checked = true;
            // Trigger the change event to update UI and calculations
            packageInput.dispatchEvent(new Event('change', { bubbles: true }));
            
            // Scroll to the packages section
            document.getElementById('packagesSection').scrollIntoView({ behavior: 'smooth' });
          }
        }
      }

      // Run preselection when page loads
      preselectPackageFromURL();
    });

    // Services data and functionality
    const servicesData = {
      vehicleSizes: [
        { id: 'sedan', name: 'Sedan', fee: 0 },
        { id: 'suv', name: 'SUV', fee: 25 },
        { id: 'truck', name: 'Truck/Van', fee: 50 }
      ],
      petHair: [
        { id: 'none', name: 'None', fee: 0 },
        { id: 'light', name: 'Light', fee: 15 },
        { id: 'heavy', name: 'Heavy', fee: 30 }
      ],
      staining: [
        { id: 'none', name: 'None', fee: 0 },
        { id: 'light', name: 'Light', fee: 20 },
        { id: 'moderate', name: 'Moderate', fee: 40 },
        { id: 'severe', name: 'Severe', fee: 60 }
      ],
      odor: [
        { id: 'none', name: 'None', fee: 0 },
        { id: 'light', name: 'Light', fee: 25 },
        { id: 'moderate', name: 'Moderate', fee: 50 },
        { id: 'severe', name: 'Severe', fee: 75 }
      ],
      addons: [
        { id: 'paint-correction', name: 'Paint Correction', fee: 100 }
      ]
    };

    // Initialize services functionality
    document.addEventListener('DOMContentLoaded', function() {
      initializeServices();
      setupEventListeners();
      updateSummary();
    });

    function initializeServices() {
      // Populate vehicle sizes
      const sizeList = document.getElementById('sizeList');
      if (sizeList) {
        sizeList.innerHTML = servicesData.vehicleSizes.map(size => `
          <label class="option-card">
            <input type="radio" name="size" value="${size.id}" data-fee="${size.fee}">
            <div class="option-content">
              <span class="option-name">${size.name}</span>
              ${size.fee > 0 ? `<span class="option-fee">+$${size.fee}</span>` : ''}
            </div>
          </label>
        `).join('');
      }

      // Populate pet hair options
      const hairList = document.getElementById('hairList');
      if (hairList) {
        hairList.innerHTML = servicesData.petHair.map(hair => `
          <label class="option-card">
            <input type="radio" name="hair" value="${hair.id}" data-fee="${hair.fee}">
            <div class="option-content">
              <span class="option-name">${hair.name}</span>
              ${hair.fee > 0 ? `<span class="option-fee">+$${hair.fee}</span>` : ''}
            </div>
          </label>
        `).join('');
      }

      // Populate staining options
      const stainList = document.getElementById('stainList');
      if (stainList) {
        stainList.innerHTML = servicesData.staining.map(stain => `
          <label class="option-card">
            <input type="radio" name="staining" value="${stain.id}" data-fee="${stain.fee}">
            <div class="option-content">
              <span class="option-name">${stain.name}</span>
              ${stain.fee > 0 ? `<span class="option-fee">+$${stain.fee}</span>` : ''}
            </div>
          </label>
        `).join('');
      }

      // Populate odor options
      const odorList = document.getElementById('odorList');
      if (odorList) {
        odorList.innerHTML = servicesData.odor.map(odor => `
          <label class="option-card">
            <input type="radio" name="odor" value="${odor.id}" data-fee="${odor.fee}">
            <div class="option-content">
              <span class="option-name">${odor.name}</span>
              ${odor.fee > 0 ? `<span class="option-fee">+$${odor.fee}</span>` : ''}
            </div>
          </label>
        `).join('');
      }

      // Populate addons
      const addonsList = document.getElementById('addonsList');
      if (addonsList) {
        addonsList.innerHTML = servicesData.addons.map(addon => `
          <label class="option-card addon-card">
            <input type="checkbox" name="addons" value="${addon.id}" data-fee="${addon.fee}">
            <div class="option-content">
              <span class="option-name">${addon.name}</span>
              <span class="option-fee">+$${addon.fee}</span>
            </div>
          </label>
        `).join('');
      }
    }

    function setupEventListeners() {
      // Listen for all form changes
      document.addEventListener('change', function(e) {
        if (e.target.matches('input[type="radio"], input[type="checkbox"]')) {
          updateSummary();
          validateForm();
        }
      });

      // Back button
      const backBtn = document.getElementById('backBtn');
      if (backBtn) {
        backBtn.addEventListener('click', function() {
          window.history.back();
        });
      }

      // Continue button
      const continueBtn = document.getElementById('continueBtn');
      if (continueBtn) {
        continueBtn.addEventListener('click', function() {
          if (validateForm()) {
            // Store selections and navigate to next step
            storeSelections();
            window.location.href = 'datetime.html';
          }
        });
      }
    }

    function updateSummary() {
      // Get selected package
      const selectedPackage = document.querySelector('input[name="package"]:checked');
      const basePrice = selectedPackage ? parseInt(selectedPackage.closest('.package-card').querySelector('.price').textContent.replace(/\$|,/g, '')) || 0 : 0;

      // Get size fee
      const selectedSize = document.querySelector('input[name="size"]:checked');
      const sizeFee = selectedSize ? parseInt(selectedSize.dataset.fee) || 0 : 0;

      // Get pet hair fee
      const selectedHair = document.querySelector('input[name="hair"]:checked');
      const hairFee = selectedHair ? parseInt(selectedHair.dataset.fee) || 0 : 0;

      // Get staining fee
      const selectedStaining = document.querySelector('input[name="staining"]:checked');
      const stainingFee = selectedStaining ? parseInt(selectedStaining.dataset.fee) || 0 : 0;

      // Get odor fee
      const selectedOdor = document.querySelector('input[name="odor"]:checked');
      const odorFee = selectedOdor ? parseInt(selectedOdor.dataset.fee) || 0 : 0;

      // Get addons total
      const selectedAddons = document.querySelectorAll('input[name="addons"]:checked');
      const addonsFee = Array.from(selectedAddons).reduce((total, addon) => {
        return total + (parseInt(addon.dataset.fee) || 0);
      }, 0);

      // Update display
      document.getElementById('basePrice').textContent = `$${basePrice}`;
      document.getElementById('sizeFee').textContent = `$${sizeFee}`;
      document.getElementById('hairTotal').textContent = `$${hairFee}`;
      document.getElementById('stainTotal').textContent = `$${stainingFee}`;
      document.getElementById('odorTotal').textContent = `$${odorFee}`;
      document.getElementById('addonsTotal').textContent = `$${addonsFee}`;

      // Show/hide rows based on values
      document.getElementById('rowHair').classList.toggle('hidden', hairFee === 0);
      document.getElementById('rowStain').classList.toggle('hidden', stainingFee === 0);
      document.getElementById('rowOdor').classList.toggle('hidden', odorFee === 0);
      document.getElementById('rowAddons').classList.toggle('hidden', addonsFee === 0);

      // Calculate and display subtotal
      const subtotal = basePrice + sizeFee + hairFee + stainingFee + odorFee + addonsFee;
      document.getElementById('subtotal').textContent = `$${subtotal}`;
    }

    function validateForm() {
      const hasPackage = document.querySelector('input[name="package"]:checked');
      const hasSize = document.querySelector('input[name="size"]:checked');
      const hasHair = document.querySelector('input[name="hair"]:checked');

      const isValid = hasPackage && hasSize && hasHair;
      
      // Update continue button state
      const continueBtn = document.getElementById('continueBtn');
      if (continueBtn) {
        continueBtn.disabled = !isValid;
      }

      // Show/hide validation messages
      document.getElementById('sizeRequiredMsg').classList.toggle('hidden', hasSize);
      document.getElementById('hairRequiredMsg').classList.toggle('hidden', hasHair);
      document.getElementById('validationMsg').classList.toggle('hidden', isValid);

      return isValid;
    }

    function storeSelections() {
      const selections = {
        package: document.querySelector('input[name="package"]:checked')?.value,
        size: document.querySelector('input[name="size"]:checked')?.value,
        hair: document.querySelector('input[name="hair"]:checked')?.value,
        staining: document.querySelector('input[name="staining"]:checked')?.value,
        odor: document.querySelector('input[name="odor"]:checked')?.value,
        addons: Array.from(document.querySelectorAll('input[name="addons"]:checked')).map(cb => cb.value)
      };
      
      // Store in sessionStorage for next page
      sessionStorage.setItem('serviceSelections', JSON.stringify(selections));
    }
  </script>

  <!-- Add styles for the new option cards -->
  <style>
    .option-card {
      background: white !important;
      border: 2px solid #e2e8f0 !important;
      border-radius: 12px !important;
      padding: 1rem !important;
      cursor: pointer !important;
      transition: all 0.2s ease !important;
      display: block !important;
    }

    .option-card:hover {
      border-color: #f97316 !important;
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.15) !important;
      transform: translateY(-1px) !important;
    }

    .option-card input:checked + .option-content,
    .option-card:has(input:checked) {
      border-color: #f97316 !important;
      background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%) !important;
      box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.2) !important;
    }

    .option-content {
      display: flex !important;
      justify-content: space-between !important;
      align-items: center !important;
      width: 100% !important;
    }

    .option-name {
      font-weight: 600 !important;
      color: #0f172a !important;
    }

    .option-fee {
      color: #f97316 !important;
      font-weight: 700 !important;
      font-size: 0.9rem !important;
    }

    .option-card input[type="radio"],
    .option-card input[type="checkbox"] {
      display: none !important;
    }

    .addon-card input[type="checkbox"] + .option-content::before {
      content: "‚òê" !important;
      margin-right: 0.5rem !important;
      font-size: 1.2rem !important;
      color: #94a3b8 !important;
    }

    .addon-card input[type="checkbox"]:checked + .option-content::before {
      content: "‚òë" !important;
      color: #f97316 !important;
    }

    .hidden {
      display: none !important;
    }
  </style>
</body>
</html>


